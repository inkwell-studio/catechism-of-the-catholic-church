---
// This component is intended to be placed on the UI only once
import { Language } from '@catechism-types';

import { Theme } from '@logic/theme';
import { translate as t } from '@logic/translation';
import { ElementID } from '@logic/ui';

interface Props {
    language: Language;
}

const { language } = Astro.props;
---

<script>
    import type { SlRadioGroup } from '@shoelace-types';
    import '@shoelace/radio-button/radio-button.js';
    import '@shoelace/radio-group/radio-group.js';

    import { $theme } from '@logic/state/theme';
    import { Theme as ThemeType } from '@logic/theme';
    import { ElementID } from '@logic/ui';

    const radioGroup: SlRadioGroup | null = document.querySelector(ElementID.THEME_SELECTOR_SELECTOR);
    radioGroup.value = $theme.get();

    radioGroup?.addEventListener('sl-change', () => {
        $theme.set(radioGroup.value as ThemeType);
    });
</script>

<sl-radio-group id={ElementID.THEME_SELECTOR} name="theme" value={Theme.LIGHT} size="large">
    <sl-radio-button value={Theme.LIGHT}>{t('Light', language)}</sl-radio-button>
    <sl-radio-button value={Theme.DARK}>{t('Dark', language)}</sl-radio-button>
    <sl-radio-button value={Theme.SYSTEM}>{t('Auto', language)}</sl-radio-button>
</sl-radio-group>

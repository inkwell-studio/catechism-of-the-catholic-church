---
import { DEFAULT_LANGUAGE } from '@catechism/source/types/language';

import CatechismContent from '@components/catechism-content/catechism-content.astro';
import { getSemanticPathPathIdMap } from '@logic/artifacts';
import { getLanguageTag, removeLanguageTag } from '@logic/utils';
import { ContentRoute, getTableOfContentsRoutes } from '@pages/_route-generator';

export const partial = true;

export function getStaticPaths(): Array<ContentRoute> {
    return getTableOfContentsRoutes();
}

const language = getLanguageTag(Astro.params.path) ?? DEFAULT_LANGUAGE;
const path = removeLanguageTag(Astro.params.path, language);

const pathID = getSemanticPathPathIdMap(language)[path] ?? null;
---

{pathID && <CatechismContent pathID={pathID} language={language} />}

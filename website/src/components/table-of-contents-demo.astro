---
import { DEFAULT_LANGUAGE, Language } from '@catechism/source/types/language';

import PartialLink from '@components/partial-link.astro';

import { getTableOfContents } from '@logic/artifacts';
import { ElementID } from '@logic/element-id';
import { path } from '@logic/navigation-utils';

interface Props {
    language: Language;
}

const { language } = Astro.props;

// TODO: Consider moving this file into the `components/catechism-content` directory when finalizing it
const tableOfContents = getTableOfContents(language);
const entries = [tableOfContents.prologue, ...tableOfContents.parts].map((entry) => {
    // prettier-ignore
    const clientUrl = DEFAULT_LANGUAGE === language
        ? path(entry.url)
        : path('/', language, entry.url);

    // prettier-ignore
    const contentUrl = DEFAULT_LANGUAGE === language
        ? path('/partials', entry.url)
        : path('/partials', language, entry.url);

    return {
        clientUrl,
        contentUrl,
        label: entry.title,
    };
});
---

<div class="flex flex-col align-stretch gap-4">
    {
        entries.map((entry) => (
            <PartialLink
                target={ElementID.CATECHISM_CONTENT_WRAPPER_SELECTOR}
                clientUrl={entry.clientUrl}
                contentUrl={entry.contentUrl}
                class="block opacity-80 border border-white rounded p-4 text-center hover:bg-white/10"
            >
                {entry.label}
            </PartialLink>
        ))
    }
</div>

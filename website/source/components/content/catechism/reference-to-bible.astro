---
import { BibleReference, Language } from '@catechism-types';

import { getBibleReferenceUrl } from '@logic/reference';
import { translate as t } from '@logic/translation';

interface Props {
    reference: BibleReference;
    language: Language;
    class?: string;
}

/*
    `...rest` is needed in order for the classes from the parent to be properly scoped for the styling specified within by parent
    (see https://docs.astro.build/en/guides/styling/#passing-a-class-to-a-child-component)
*/
const { reference, language, class: classes, ...rest } = Astro.props;

const prefix = reference.direct ? '' : t('Cf. ', language);
const postfix = reference.auxillaryText ? ` (${t(reference.auxillaryText, language)})` : '';
const book = t(reference.book, language);
const text = `${prefix}${book} ${reference.chapter}:${reference.verses}${postfix}`;

const url = getBibleReferenceUrl(reference, language);
---

<a href={url} target="_blank" class={classes} {...rest}>
    {text}
</a>

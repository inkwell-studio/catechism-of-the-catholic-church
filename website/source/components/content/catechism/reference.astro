---
import { Language, ReferenceBase } from '@catechism-types';
import { isBibleReference as isBibleReferenceUtil, isOtherReference as isOtherReferenceUtil } from '@catechism-utils/content';

import ReferenceToBible from './reference-to-bible.astro';
import ReferenceToOther from './reference-to-other.astro';

interface Props {
    reference: ReferenceBase | null;
    language: Language;
    class?: string;
}

/*
    `...rest` is needed in order for the classes from the parent to be properly scoped for the styling specified within by parent
    (see https://docs.astro.build/en/guides/styling/#passing-a-class-to-a-child-component)
*/
const { reference, language, class: classes, ...rest } = Astro.props;

const isBibleReference = isBibleReferenceUtil(reference);
const isOtherReference = isOtherReferenceUtil(reference);

if (!isBibleReference && !isOtherReference) {
    console.warn(`Unknown reference type encountered: ${reference.referenceType}`);
}
---

{isBibleReference && <ReferenceToBible {reference} {language} class={classes} {...rest} />}
{isOtherReference && <ReferenceToOther {reference} {language} class={classes} {...rest} />}

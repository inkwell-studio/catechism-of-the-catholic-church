---
import { Language } from '@catechism/source/types/types';
import { getSupportedLanguages } from '@catechism/source/utils/language';

import Content from '@components/content.astro';
import TableOfContents from '@components/table-of-contents.astro';

import { getRenderablePathID } from '../logic/routing';
import { translate } from '../logic/translation';

interface Props {
    path: string;
    language: Language;
}

const { path, language } = Astro.props;

const pathID = getRenderablePathID(language, path);
const languages = getSupportedLanguages().map(([key, lang]) => lang);
---

<div class="space-y-16 p-8 rounded border-8 border-black/20 dark:border-white/20">
    <div>
        <h2>{translate('Language', language)}</h2>
        <ul class="flex gap-4">
            {
                languages.map((language) => (
                    <li>
                        <a class="text-lg font-mono opacity-80 p-4 hover:bg-white/20 rounded" href={'/' + language}>
                            {language}
                        </a>
                    </li>
                ))
            }
        </ul>
    </div>

    <div class="flex flex-col gap-4">
        <div class="text-xl font-bold font-mono">{language}</div>
        <div class="border-t border-stone-400 dark:border-slate-400"></div>
        <div class="font-mono">{path}</div>
    </div>

    <div class="grid grid-cols-[auto_1fr] gap-12">
        <div>
            <TableOfContents language={language} />
        </div>
        <div>
            <div>Catechism text</div>
            <Content pathID={pathID} language={language} />
        </div>
    </div>
</div>
